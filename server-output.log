
> self-coding@0.1.0 dev
> next dev

   â–² Next.js 15.3.2
   - Local:        http://localhost:3000
   - Network:      http://192.168.100.195:3000
   - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 8.1s
 â—‹ Compiling /api/admin/auth ...
 âœ“ Compiled /api/admin/auth in 8.8s (417 modules)
ðŸ“ Carregando credenciais do arquivo service-account.json.json
âœ… Firebase Admin inicializado com sucesso!
ðŸ“‹ Projeto: barbearia-bd25e
=== ENDPOINT CHAMADO ===
IP do cliente: ::1
=== INÃCIO DA AUTENTICAÃ‡ÃƒO ===
Email recebido: dennisemannuel93@gmail.com
IP do cliente: ::1
ðŸ” Verificando usuÃ¡rio no Firebase Auth...
âœ… UsuÃ¡rio encontrado no Firebase Auth: eF1h16ChDuOZ6pNtbGmk9A7jm152
ðŸ” Buscando documento admin: dennisemannuel93_gmail_com
âœ… Documento admin encontrado: { active: true, role: 'super_admin' }
Tentando autenticar com Firebase API Key: AIzaSyATDE21wBLKPqLc...
Firebase Auth Response Status: 200
Authentication successful for: dennisemannuel93@gmail.com
Erro na autenticaÃ§Ã£o: Error: The provided ID token is not a valid Firebase ID token.
    at async POST (src\app\api\admin\auth\route.ts:137:26)
  135 |
  136 |       // Criar um token JWT para sessÃ£o admin
> 137 |       const accessToken = await auth.createSessionCookie(customToken, {
      |                          ^
  138 |         expiresIn: ACCESS_TOKEN_EXPIRY * 1000, // Converter para milissegundos
  139 |       });
  140 | {
  errorInfo: [Object],
  codePrefix: 'auth'
}
 POST /api/admin/auth 401 in 15284ms
=== ENDPOINT CHAMADO ===
IP do cliente: ::1
=== INÃCIO DA AUTENTICAÃ‡ÃƒO ===
Email recebido: dennisemannuel93@gmail.com
IP do cliente: ::1
ðŸ” Verificando usuÃ¡rio no Firebase Auth...
âœ… UsuÃ¡rio encontrado no Firebase Auth: eF1h16ChDuOZ6pNtbGmk9A7jm152
ðŸ” Buscando documento admin: dennisemannuel93_gmail_com
âœ… Documento admin encontrado: { active: true, role: 'super_admin' }
Tentando autenticar com Firebase API Key: AIzaSyATDE21wBLKPqLc...
Firebase Auth Response Status: 200
Authentication successful for: dennisemannuel93@gmail.com
Erro na autenticaÃ§Ã£o: Error: The provided ID token is not a valid Firebase ID token.
    at async POST (src\app\api\admin\auth\route.ts:137:26)
  135 |
  136 |       // Criar um token JWT para sessÃ£o admin
> 137 |       const accessToken = await auth.createSessionCookie(customToken, {
      |                          ^
  138 |         expiresIn: ACCESS_TOKEN_EXPIRY * 1000, // Converter para milissegundos
  139 |       });
  140 | {
  errorInfo: [Object],
  codePrefix: 'auth'
}
 POST /api/admin/auth 401 in 1366ms
 â—‹ Compiling / ...
 âœ“ Compiled / in 8.7s (766 modules)
 GET / 200 in 9815ms
 âœ“ Compiled in 2.6s (316 modules)
 âœ“ Compiled in 1464ms (316 modules)
 âœ“ Compiled in 1365ms (316 modules)
 âœ“ Compiled in 1201ms (316 modules)
 âœ“ Compiled in 1679ms (316 modules)
